<!DOCTYPE html>
<html>
<head>
    <title>Test API - Debug</title>
</head>
<body>
    <h1>ðŸ”§ Test de connexion API - Debug Mode</h1>
    <button onclick="testAPI()">Tester API</button>
    <div id="result">Initialisation...</div>
    <div id="debug"></div>
    
    <script>
        const resultDiv = document.getElementById('result');
        const debugDiv = document.getElementById('debug');
        
        function log(message) {
            console.log(message);
            debugDiv.innerHTML += '<p>' + new Date().toLocaleTimeString() + ': ' + message + '</p>';
        }
        
        async function testAPI() {
            resultDiv.innerHTML = 'â³ Testing...';
            resultDiv.style.color = 'orange';
            
            try {
                log('ðŸš€ DÃ©but du test API');
                log('ðŸ“ URL cible: http://localhost:3000/api/auth/health');
                
                const response = await fetch('http://localhost:3000/api/auth/health', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });
                
                log('ðŸ“¡ RÃ©ponse reÃ§ue: ' + response.status + ' ' + response.statusText);
                
                const data = await response.json();
                log('âœ… DonnÃ©es reÃ§ues: ' + JSON.stringify(data));
                
                resultDiv.innerHTML = `âœ… Success: ${JSON.stringify(data, null, 2)}`;
                resultDiv.style.color = 'green';
            } catch (error) {
                log('âŒ Erreur: ' + error.message);
                resultDiv.innerHTML = `âŒ Error: ${error.message}`;
                resultDiv.style.color = 'red';
            }
        }
        
        // Test automatique au chargement
        window.onload = () => {
            log('ðŸŽ¯ Page chargÃ©e, lancement du test automatique');
            testAPI();
        };
    </script>
</body>
</html>